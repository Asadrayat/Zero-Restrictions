{% comment %} {{ 'component-card.css' | asset_url | stylesheet_tag }} {% endcomment %}
{% liquid
  assign id = section.id
%}

<style>
      .sec-{{ id }} {
        box-sizing: border-box;
        margin-top: {{section.settings.margin_top | append: 'px'}};
        margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
        padding-top: {{section.settings.padding_top | append: 'px'}};
        padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
        position: relative;
      }

      @media(max-width: 768px) {
        .sec-{{ id }} {
          margin-top: {{section.settings.margin_top_m | append: 'px'}};
          margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
          padding-top: {{section.settings.padding_top_m | append: 'px'}};
          padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
        }
      }

    .wrapper-{{ id }}{

        display: grid;
        grid-template-columns: repeat(2, minmax(0,1fr));
        gap: var(--Spacing-Container-xxs);
        row-gap: var(--Spacing-Container-lg);
        @media(max-width: 768px){
          grid-template-columns: repeat(1, minmax(0,1fr));
        }

      
    /* .--top-block {
        display: grid;
        grid-template-columns: repeat(2, minmax(0,1fr));
        gap: var(--Spacing-Container-xxs);
        align-items: center;
        margin-bottom: var(--Spacing-Container-lg);
        @media(max-width: 600px){
          grid-template-columns: minmax(0,1fr);
          gap: var(--Spacing-Container-xs);
        }
    } */
      .--text-content {
      display: flex;
      gap: var(--Spacing-Container-sm, 16px);
      align-self: stretch;
      align-items: center;
  }
      .--collegiate-icon-wrapper {
      display: flex;
      width: 80px;
      height: 80px;
      justify-content: center;
      align-items: center;
      gap: 8px;
      aspect-ratio: 1/1;
      border-radius: 64px;
      border: 1px solid rgba(224, 224, 224, 0.35);
      background: rgba(224, 224, 224, 0.20);
      box-sizing: border-box;
      @media(max-width: 768px){
         width: 50px;
          height: 50px;
      }
  }
      h2.--section-title {
          color: var(--Content-Base-main, #1F2937);
          /* font-family: var(--font-family-Title, "Neue Plak"); */
          /* font-size: var(--Font-Size-Heading-H2, 40px); */
          font-weight: 500;
          /* line-height: var(--Line-Height-Heading-H2, 40px); */
          letter-spacing: -0.4px;
          margin-block: 0 var(--Spacing-Container-xxs);
      }
    /* .--section-subtitle {
        color: var(--Content-Base-main, #1F2937);
        font-family: var(--font-family-Body, "Neue Plak");
        font-size: var(--Font-Size-Paragraph-Medium);
        line-height: var(--Line-Height-Paragraph-Medium);
    } */




    .--button-wrapper {
        display: flex;
        gap: var(--Spacing-Container-sm);
        justify-content: flex-end;
        align-items: center;
        @media(max-width: 600px){
          justify-content: flex-start;
          grid-row: 3/4;
        }
    }
    a.--button {
        max-height: max-content;
        display: block;
        /* color: var(--Content-Base-main, #1F2937); */
        text-align: center;
        /* font-family: var(--font-family-Body, "Neue Plak"); */
        font-size: var(--Font-Size-UI-Controls-Control-Button-Regular);
        line-height: var(--Line-Height-UI-Controls-Control-Button-Regular);
        text-transform: capitalize;
        /* padding: var(--Spacing-Container-sm) var(--Spacing-Container-lg); */
        padding: var(--Spacing-Container-xs) var(--Spacing-Container-lg) var(--Spacing-Container-sm);
        /* border-radius: var(--rounded-3xl, 24px); */
        border-radius: 50px;
        /* border: 2px solid var(--Content-Base-main); */
        /* background: #EEEDF7; */
    }
    a.--button:hover {
        @media(max-width: 768px){
          background: #00000052;
        }          
      }

    /* Swiper Styling */
    .--slider-wrapper{
      position: relative;
      grid-column: 1/-1;
    }
    .swiper:not(.swiper-initialized) .swiper-slide {
        max-width: calc(var(--page-width)/4) !important;
        margin-right: 16px;
        overflow: hidden;
    }
    .--navigation-wrapper {
        position: relative;
        margin-block: 20px;
        display: flex;
        gap: 5px;
        z-index: 2;
      }
    .--arrow-wrapper {
        display: flex;
        gap: 10px;

    }
    .--scrollbar-wrapper{
      position: relative;
    }
    {% comment %} .--nav-icon {
        width: 40px;
        height: 40px;
        display: flex;
        background: #fff;
        line-height: 1;
        /* position: absolute; */
        top: 50%;
        z-index: 1;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        /* transform: translateY(-50%); */
        box-shadow: 0px 1px 2px -1px rgba(0, 0, 0, 0.10), 0px 1px 3px 0px rgba(0, 0, 0, 0.10);
        cursor: pointer;
        z-index: 2;
    }
    .--nav-icon:hover {
      @media(min-width: 769px){
        background: rgba(0, 0, 0, 0.32);
      }

    }

    .--nav-icon.swiper-button-disabled {
        /* display: none; */
        opacity: 0.5;
    }
      .--nav-icon.swiper-button-disabled.swiper-button-lock {
       display: none;
    } {% endcomment %}
      .prev-{{ section.id }}.--nav-icon {
        left: 0;
        /* left: -20px; */
      }
      .next-{{ section.id }}.--nav-icon {
        right: 0;
        /* right: -20px; */
      }

      .swiper-scrollbar-{{ section.id }} {
      position: relative !important;
      top: 19px;
      left: 10px !important;
      bottom: unset !important;
      /* margin: var(--Spacing-Container-xl) 0 0 0; */
      height: 2px !important;
      opacity: 1 !important;
      width: 300px !important;
      cursor: pointer;
      z-index: 2;
      /* padding-block: 8px; */
      background: transparent;
      @media(max-width: 600px){
        width: 250px !important;
      }


      .swiper-scrollbar-drag {
        background: #00094b;
        display: block !important;
        height: 2px;
      }
    }
    .swiper-scrollbar-{{ section.id }}::before {
      position: absolute;
      content: "";
      background: var(--swiper-scrollbar-bg-color, rgba(0, 0, 0, .1));
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
    }
    }
</style>

<div id="{{ section.settings.id_nav | downcase }}" class="sec-{{ id }}">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    <div class="wrapper-{{ id }}">
      {% comment %}
           <div class="--top-block">
          <div class="--text-content">
            <div class="--collegiate-icon-wrapper">
              {% if section.settings.image != blank %}
                {{ section.settings.image | image_url: width: 100 | image_tag }}
              {% else %}
                {{ 'image' | placeholder_svg_tag }}
              {% endif %}
            </div>
            <h2 class="--section-title">
              {% if section.settings.title != blank %}
                {{ section.settings.title }}
              {% else -%}
                {{- section.settings.collection.title -}}
              {%- endif %}
            </h2>
            <!-- <div class="--section-subtitle">{{ section.settings.subtitle }}</div> -->
          </div>
          <div class="--button-wrapper">
            {% if section.settings.button_label != blank and section.settings.collection != blank %}
              <a class="--button button" href="{{ section.settings.collection.url }}">
                {{ section.settings.button_label }}
              </a>
            {% endif %}
          </div>
        </div>
      {% endcomment %}

      <div class="--text-content">
        <div class="--collegiate-icon-wrapper">
          {% if section.settings.image != blank %}
            {{ section.settings.image | image_url: width: 100 | image_tag }}
          {% else %}
            {{ 'image' | placeholder_svg_tag }}
          {% endif %}
        </div>
        <h2 class="--section-title">
          {% if section.settings.title != blank %}
            {{ section.settings.title }}
          {% else -%}
            {{- section.settings.collection.title -}}
          {%- endif %}
        </h2>
        <!-- <div class="--section-subtitle">{{ section.settings.subtitle }}</div> -->
      </div>
      <div class="--button-wrapper">
        {% if section.settings.button_label != blank and section.settings.collection != blank %}
          <a class="--button button" href="{{ section.settings.collection.url }}">
            {{ section.settings.button_label }}
          </a>
        {% endif %}
      </div>

      <div class="--slider-wrapper swiper__container">
        <div class="swiper swiper-{{ section.id }}">
          <div class="swiper-wrapper">
            {% for product in section.settings.collection.products limit: 8 %}
              <div class="swiper-slide">
                {% # render 'card-product-new-v3', product: product, forloop: forloop, class: 'swiper-slide' %}
                {% render 'card-product-new-v4', product: product, forloop: forloop %}
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="--navigation-wrapper">
        <div class="--arrow-wrapper">
          <div class="prev-{{ section.id }} --nav-icon">
            {% render 'all-icons', name: 'left_arrow' %}
          </div>
          <div class="next-{{ section.id }} --nav-icon">
            {% render 'all-icons', name: 'right_arrow' %}
          </div>
        </div>
        <div class="swiper-scrollbar-{{ section.id }} swiper-scrollbar"></div>
        <div class="--scrollbar-wrapper"></div>
      </div>
      </div>
      
    </div>
  </div>
</div>
{% comment %}
<script>
  function fcinitSwiper(classname) {
    if(classname){
      new Swiper(classname, {
        slidesPerView: 1.2,
        spaceBetween: 0,
        touchMoveStopPropagation: true,
        // touchStartPropagation: false,
        // preventClicks: true,
        // preventClicksPropagation: true,
        // slideToClickedSlide: false,
        // allowTouchMove: false,
        navigation: {
          nextEl: '.next-{{ section.id }}',
          prevEl: '.prev-{{ section.id }}'
        },
        scrollbar: {
          el: ".swiper-scrollbar-{{ section.id }}.swiper-scrollbar",
          draggable: true,
          hide: true
        },
        breakpoints: {
          600: {
            slidesPerView: 4,
            spaceBetween: 0
          }
        }
      });
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    fcinitSwiper(".swiper-{{ section.id }}");
  });

  // Optional: Add an event listener to handle window resize events
  // window.addEventListener('resize', function() {
  //   fcinitSwiper(".swiper-{{ section.id }}"); // Re-initialize Swiper on window resize
  // });
</script>

  
{% endcomment %}
<script>

  document.addEventListener('DOMContentLoaded', function() {    
      new Swiper(".swiper-{{ section.id }}", {
        slidesPerView: 1.2,
        spaceBetween: 0,
        touchMoveStopPropagation: true,
        // touchStartPropagation: false,
        // preventClicks: true,
        // preventClicksPropagation: true,
        // slideToClickedSlide: false,
        // allowTouchMove: false,
        navigation: {
          nextEl: '.next-{{ section.id }}',
          prevEl: '.prev-{{ section.id }}'
        },
        scrollbar: {
          el: ".swiper-scrollbar-{{ section.id }}.swiper-scrollbar",
          draggable: true,
          hide: true
        },
        breakpoints: {
          600: {
            slidesPerView: 4,
            spaceBetween: 0
          }
        }
      });

  });

</script>

{% schema %}
{
  "name": "Single Collegiate",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
       {
      "type": "text",
      "id": "id_nav",
      "label": "Id for Navigtion"
    },
    {
      "type": "header",
      "content": "Section Content"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Collegiate Icon"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Title"
    },

    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "View Full Collection"
    },

    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],

  "presets": [
    {
      "name": "Single Collegiate"
    }
  ]
}
{% endschema %}
