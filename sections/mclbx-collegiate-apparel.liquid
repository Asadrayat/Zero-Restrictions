{% liquid
  assign id = section.id
%}
{% # assign collegiate_list = shop.metaobjects.collegiate_list['collegiate-list'].collegiate_brands.value %}
{% # assign collegiate_list = shop.metaobjects.collegiate_cards.values %}

{% assign collegiate_list = shop.metaobjects.collegiate_list.values %}
{% # assign count = 0 %}

{% # assign alphabets = 'abcdefghijklmnopqrstwxyz' | split: '' %}
<style>
          #shopify-section-{{id}} {
            box-sizing: border-box;
            margin-top: {{section.settings.margin_top | append: 'px'}};
            margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
            padding-top: {{section.settings.padding_top | append: 'px'}};
            padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
            background-image: url("{{ section.settings.image | image_url }}");
            background-size: 100%;
            background-position: center;
          }

          @media(max-width: 768px) {
            #shopify-section-{{id}} {
              margin-top: {{section.settings.margin_top_m | append: 'px'}};
              margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
              padding-top: {{section.settings.padding_top_m | append: 'px'}};
              padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
              background-position: center;
              background-repeat: no-repeat;
              background-size: cover;
            }
          }

        .sec-{{ id }}{

      .wrapper-{{ id }} {
          max-width: 900px;
          /* max-height: 70vh; */
          max-height: 600px;
          /* padding: var(--Spacing-Container-lg, 40px) var(--Spacing-Container-md, 24px) var(--Spacing-Container-0, 0px) var(--Spacing-Container-md, 24px); */
          padding: var(--Spacing-Container-lg, 40px) var(--Spacing-Container-md, 24px) ;
          margin-inline: auto;
          border-radius: 16px;
          background: #F5F5F5;
          backdrop-filter: blur(8px);
          overflow-y: scroll;
      }
  ::-webkit-scrollbar {
    width: 0;
  }

      .wrapper.accordion-wrapper.accordion-wrapper--{{ section.id }} {
          display: flex;
          flex-direction: column;
          gap: var(--Spacing-Container-lg, 40px);
      }

  .accordion{
    svg {
      transition: all 0.3s ease-in;
      width: 20px;
      height: 20px;
  }
    svg.--minus {
      display: none;
      /* opacity: 0; */
    }
  }
  .accordion.active{
    svg {
      rotate: 180deg;
      transition: all 0.3s ease-in;
      /* opacity: 0; */
    }
    svg.--minus {
      display: block;
      /* opacity: 1; */
    }
  }

      h2.--section-title {
          color: var(--Content-Base-main, #1F2937);
          /* font-family: var(--font-family-Title, "Neue Plak"); */
          /* font-size: var(--Font-Size-Heading-H2, 40px); */
          /* font-style: normal; */
          font-weight: 400;
          line-height: var(--Line-Height-Heading-H2, 40px);
          letter-spacing: -0.4px;
          margin-top: 0;
      }
      .acr-title {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding-block: 2px;
          border-bottom: 2px solid #000;
          cursor: pointer;
      }


      h4.--tab-title {
          color: var(--Content-Base-base, #4B5563);
          font-family: var(--font-family-Title, "Neue Plak");
          font-size: var(--Font-Size-Heading-H4, 20px);
          font-weight: 400;
          line-height: var(--Line-Height-Heading-H4, 24px);
          letter-spacing: -0.4px;
          margin-block: 0;
      }



      .--cards-container {
          display: flex;
          flex-wrap: wrap;
          gap: var(--Spacing-Container-xxs, 8px);
          padding-top: var(--Spacing-Container-xs, 12px);
          @media(max-width: 600px){
            /* justify-content: space-between; */
          }
      }


      .--card {
          position: relative;
          max-width: 120px;
          text-align: center;
          @media(max-width: 600px){
                max-width: unset;
                width: 32%;
          }
      }
      span.--card-title {
          max-width: 78px;
          display: block;
          margin-inline: auto;
          color: #000;
          font-family: var(--font-family-Body, "Neue Plak");
          font-size: var(--Font-Size-Paragraph-Tiny, );
          line-height: var(--Line-Height-Paragraph-Tiny, );
      }
      img.--card-image {
          margin-inline: auto;
          aspect-ratio: 1;
          object-fit: contain;
      }
    .--empty-message {
        color: #000;
    }

        }
</style>

<div class="sec-{{ id }}">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    <div class="wrapper-{{ id }}">
      <h2 class="--section-title">{{ section.settings.title }}</h2>
      <accordion-element>
        <div class="wrapper accordion-wrapper accordion-wrapper--{{ section.id }}">
          {% for x in collegiate_list %}
            {% if x.list_label != blank and x.collegiate_brands != blank %}
              <div class="accordion">
                <div class="acr-title">
                  <h4 class="--tab-title">{{ x.list_label | upcase }}</h4>
                  {%- render 'all-icons', name: 'down' -%}
                  {% comment %}
                    <svg
                      class="--plus"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path d="M12 5V19M5 12H19" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <svg
                      class="--minus"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path d="M5 12H19" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  {% endcomment %}
                </div>
                <div class="acr-content">
                  <div class="--cards-container">
                    {% for card in x.collegiate_brands.value %}
                      <div class="--card">
                        {{ card.image | image_url: width: 60 | image_tag: class: '--card-image' }}
                        <span class="--card-title">{{ card.title }}</span>
                        <a class="absolute-link" href="{{ card.collection.value.url }}"> </a>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
          {% comment %}
            {% for alphabet in alphabets %}
              <div class="accordion">
                <div class="acr-title">
                  <h4 class="--tab-title">{{ alphabet | upcase }}</h4>

                  <svg
                    class="--plus"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path d="M12 5V19M5 12H19" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>

                  <svg
                    class="--minus"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path d="M5 12H19" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="acr-content">
                  <div class="--cards-container">
                    {% assign emptycontainer = true %}
                    {% for card in collegiate_list %}
                      {% assign collegiateTitle = card.title | downcase | split: '' %}
                      {% if collegiateTitle[0] == alphabet %}
                        {% assign emptycontainer = false %}
                        <div class="--card">
                          {{ card.image | image_url: width: 60 | image_tag: class: '--card-image' }}
                          <span class="--card-title">{{ card.title }}</span>
                          <a class="absolute-link" href="{{ card.collection.value.url }}"> </a>
                        </div>
                      {% endif %}
                    {% endfor %}

                    {% if emptycontainer == true %}
                      <div class="--empty-message">No Collegiate Available</div>
                    {% endif %}
                  </div>
                </div>
              </div>
            {% endfor %}
          {% endcomment %}
        </div>
      </accordion-element>

      <script>
        new Accordion('.accordion-wrapper.accordion-wrapper--{{ section.id }}', {
            closeAll: true,
            initOpenIndex: 1,
            duration: 700,
            activeClass: 'active'
        })
      </script>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Collegiate Apparel",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": true
    },
    {
      "type": "header",
      "content": "Section Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],

  "presets": [
    {
      "name": "Collegiate Apparel"
    }
  ]
}
{% endschema %}
