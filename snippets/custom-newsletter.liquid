<style>
    .section-container--{{ section.id }}{
      .footer__newsletter.newsletter-form{
        button.--newsletter-submit {
      cursor: pointer;
      display: inline-block;
      padding: var(--Spacing-Container-sm) var(--Spacing-Container-lg);
      text-align: center;
      font-family: var(--font-family-Body, "Neue Plak");
      font-size: var(--Font-Size-UI-Controls-Control-Button-Small);
      font-style: normal;
      font-weight: 400;
      line-height: var(--Line-Height-UI-Controls-Control-Button-Small);
      text-transform: capitalize;
      transition: all .4s;
      letter-spacing: normal;
      min-height: unset;
      min-width: unset;
      width: 100%;
      color: #fff;
      background-color: #eeedf796;
      -webkit-backdrop-filter: blur(5px);
      backdrop-filter: blur(5px);
      border-radius: var(--rounded-full, 999999px);
      background: #000000;
      border: 0;
      margin-block: 32px 16px;
      @media(max-width: 768px){
        margin-block: 16px;
      }
  }
    .--disclaimer-text {
      font-size: 12px;
      line-height: 18px;
      color: #fff;
  }

  .field__label, .customer .field label {
        top: calc(50% - 12px);
  }
  .field__input:focus~.field__label, .field__input:not(:placeholder-shown)~.field__label, .field__input:-webkit-autofill~.field__label, .customer .field input:focus~label, .customer .field input:not(:placeholder-shown)~label, .customer .field input:-webkit-autofill~label {      
      top: calc(var(--inputs-border-width) + 10px);
  }
  .field:before ,
  .field:after {
      content: none;
  }
    .field__input{
      border-radius: 50px;
      height: 55px;
    }    
  .field__input:focus-visible, .select__select:focus-visible, .customer .field input:focus-visible, .customer select:focus-visible, .localization-form__select:focus-visible.localization-form__select:after {
      box-shadow: unset;
      outline: 0;
      /* border-radius: var(--inputs-radius); */
      background: #fff;
  }








      }
    }
</style>

{%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter newsletter-form' -%}
  <div class="--whole-form-wrapper {% if form.posted_successfully? %}hidden{% endif %}">
    <input type="hidden" name="contact[tags]" value="newsletter">
    <div class="newsletter-form__field-wrapper">
      <div class="field">
        <input
          id="NewsletterForm--{{ section.id }}"
          type="email"
          name="contact[email]"
          class="field__input"
          value="{{ form.email }}"
          aria-required="true"
          autocorrect="off"
          autocapitalize="off"
          autocomplete="email"
          {% if form.errors %}
            autofocus
            aria-invalid="true"
            aria-describedby="ContactFooter-error"
          {% elsif form.posted_successfully? %}
            aria-describedby="ContactFooter-success"
          {% endif %}
          placeholder="{{ 'newsletter.label' | t }}"
          required
        >
        <label class="field__label" for="NewsletterForm--{{ section.id }}">
          {{ 'newsletter.label' | t }}
        </label>
      </div>
      {%- if form.errors -%}
        <small class="newsletter-form__message form__message" id="ContactFooter-error">
          <span class="svg-wrapper">
            {{- 'icon-error.svg' | inline_asset_content -}}
          </span>
          {{- form.errors.translated_fields.email | capitalize }}
          {{ form.errors.messages.email -}}
        </small>
      {%- endif -%}
    </div>
    <div class="--button-wrapper hidden" id="--button-wrapper--{{ section.id }}">
      <button
        type="submit"
        class="--newsletter-submit"
        name="commit"
        id="Subscribe"
        aria-label="{{ 'newsletter.button_label' | t }}"
      >
        Subscribe
      </button>
      <div class="--disclaimer-text">
        By continuing, you accept our privacy policy. Your personal data will be shared with Zero Restriction to keep
        you informed about our latest products, promotions, and updates. We may also send you surveys and special offers
        via email. You can unsubscribe at any time by clicking the unsubscribe link in any email.
      </div>
    </div>
  </div>

  {%- if form.posted_successfully? -%}
    <script>
      // Ensure the element exists before updating the text content
      var newsletterContent = document.querySelector('.section-container--{{ section.id }} .--newsletter-content');
      if (newsletterContent) {
        newsletterContent.textContent = "Thank you for subscribing. Please check your inbox for the latest news.";
      } else {
        console.error("Newsletter content element not found.");
      }
    </script>

    <!-- <h3
      class="newsletter-form__message newsletter-form__message--success form__message"
      id="ContactFooter-success"
      tabindex="-1"
      autofocus
    >
      Thank you for subscribing. Please check your inbox for the latest news.
    </h3> -->
  {%- endif -%}
{%- endform -%}

<script>
  // Add event listener for each keystroke in the email input
  document.getElementById("NewsletterForm--{{ section.id }}").addEventListener("input", function() {
    validateEmail();  // Call the validateEmail function on each input event
  });

  function validateEmail() {

    var email = document.getElementById("NewsletterForm--{{ section.id }}").value;
    console.log("Value :",email )
    var submitButtonWrapper = document.getElementById("--button-wrapper--{{ section.id }}");
    // var emailError = document.getElementById("emailError");
    // var emailInput = document.getElementById("email");
    var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

    if (!regex.test(email)) {
      // If email is invalid
      // emailError.textContent = "Please enter a valid email address.";
      // emailInput.classList.add("invalid"); // Add 'invalid' class
      submitButtonWrapper.classList.add("hidden"); // Add 'invalid' class
      // emailInput.classList.remove("valid"); // Remove 'valid' class
    } else {
      // If email is valid
      // emailError.textContent = "";
      // emailInput.classList.add("valid"); // Add 'valid' class
      // emailInput.classList.remove("invalid"); // Remove 'invalid' class
      submitButtonWrapper.classList.remove("hidden"); // Remove 'invalid' class
    }
  }
</script>
