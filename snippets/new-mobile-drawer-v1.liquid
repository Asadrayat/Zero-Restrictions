<div class="mbl__drawer lg-hide glass__bg-full">
  <div class="mbl__drawer-wrapper">
    <div class="mbl__drawer-header">
      <div class="mbl__drawer-header-inner">
        <a class="mbl__header-logo" site-logo href="/">
          {% render 'header-icons', name: 'zero' %}
          {% comment %}
          {% unless logo %}
            <h2>ZERO</h2>
          {% else %}
            <picture>
              <source media="(min-width: 744px)" srcset="{{ logo | image_url: width: logo_width }}">
              {{ logo | image_url: width: logo_width_m | image_tag: class: 'regular__logo', loading: 'lazy' }}
            </picture>
          {% endunless %}
          {% endcomment %}
        </a>
        {% comment %}
        <button mbl-drawer-close>{% render 'header-icons', name: 'close' %}</button>
        {% endcomment %}
      </div>
    </div>
    <div class="mbl__drawer-contents">
      <div class="mbl__nav">
        <div class="mbl__nav-wrapper">
          <nav class="mbl__menu mbl__menu-lvl1">
            <ul>
              {% for link in section.settings.menu.links %}
                <li>
                  <a data-fade {% if link.links != blank %}class="open-menu" data-trigger="{{ link.title | handleize }}"{% endif %} href="{{ link.url }}">
                    {{ link.title }}
                    {% if link.links != blank %}
                      {% render 'all-icons', name: 'right_arrow_mbl_nav' %}
                    {% endif %}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </nav>
        </div>
      </div>
      
      <div  class="drawer__account ">
        <a data-fade class="header__icon-item header-icon-- animate" account-drawer href="/products/gift-card">
          Gift Cards
        </a>
        <a data-fade class="header__icon-item header-icon-- animate" account-drawer href="/account">
          Account
        </a>
        <a data-fade class="header__icon-item header-icon-- animate" account-drawer href="/pages/contact-us">
          Support
        </a>
      </div>

      {% assign content_blocks = section.blocks | where: 'type', 'content_mbl' %}
      {% if content_blocks.size > 0 %}
        <div class="content__blocks">
          <div class="content__blocks-wrapper">
            {% for content in content_blocks %}
              <div data-fade class="block__item animate">
                <div class="block__image">
                  {% if content.settings.image %}
                    {{ content.settings.image
                      | image_url: width: 960
                      | image_tag:
                        widths: '240,360,480,720,960',
                        sizes: '(max-width: 768px) 50vw, 25vw',
                        alt: content.settings.title | default: '' }}
                  {% endif %}
                </div>

                {% if content.settings.title != blank %}
                  <p>{{ content.settings.title }}</p>
                {% endif %}

                {% if content.settings.link != blank %}
                  <a href="{{ content.settings.link }}"
                    aria-label="{{ content.settings.title | default: 'Open item' | escape }}"></a>
                {% endif %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}


      <div class="drawer__utilities">
        <div class="drawer__utilities-wrapper">
          <div class="mbl__currency">
            <button data-fade type="button" class="mbl-currency-button">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width=".8" d="M10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12ZM4 10h12"></path>
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width=".8" d="M10 4a9.18 9.18 0 0 1 2.4 6 9.18 9.18 0 0 1-2.4 6 9.18 9.18 0 0 1-2.4-6c.05-2.22.9-4.36 2.4-6v0Z"></path>
              </svg>
              <span class="mbl-currency-text">
                {{ localization.country.name }}
                <span>({{ localization.country.currency.iso_code }})</span>
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
    {% for link in section.settings.menu.links %}
      {% if link.links != blank %}
        <div data-drawer="{{ link.title | handleize }}" class="child__menu">
          <button class="back-button child__back">
            {% render 'all-icons', name: 'link' %}
            <span>{{ link.title }}</span>
          </button>
          <div class="child__menu-wrapper">
            <ul>
              {% for child in link.links %}
                <li class="child__menu-inner">
                   <div data-fade class="child__menu-header">
                     <a href="{{ child.url }}">{{ child.title }}</a>
                    {%- if child.links != blank -%}
                      <button class="open-submenu" data-trigger="{{ child.title | handleize }}">
                          {% render 'all-icons', name: 'plus' %}
                          {% render 'all-icons', name: 'minus' %}
                      </button>
                    {%- endif -%}
                   </div>
                  {% if child.links != blank %}
                    <ul class="grandchild__menu-wrapper">
                      {% for grand in child.links %}
                        <li>
                          <a data-fade href="{{ grand.url }}">{{ grand.title }}</a>
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endif %}
    {% endfor %}
    <div class="mbl__currency-selector">
      <div class="mbl__currency-inner">
        <div class="currency__back-btn">
          <button currency-back-button>{% render 'all-icons', name: 'link' %} Select Country</button>
        </div>
        <div class="mbl__currency-wrapper">
          {%- form 'localization', id: 'LocalizationForm', class: 'country-selector-form' -%}
            <div class="currency-selector">
              <ul class="currency-list">
                {%- for country in localization.available_countries -%}
                  <li
                    data-fade
                    data-value="{{ country.iso_code }}"
                    data-currency="{{ country.currency.iso_code }}"
                    data-symbol="{{ country.currency.symbol }}"
                    data-country="{{ country.name }}"
                  >
                    <span class="country-currency">
                      {{- country.name -}}
                      <span>({{ country.currency.iso_code }})</span>
                    </span>
                  </li>
                {%- endfor -%}
              </ul>

              <input
                type="hidden"
                name="country_code"
                class="selected-country-code"
                value="{{ localization.country.iso_code }}"
              >
            </div>
          {%- endform -%}
        </div>
      </div>
    </div>
    <a class="glass__bg- header-icon lg-hide mobile-drawer-open pos-rel mobile-drawer-open-drawer" mobile-drawer-opener href="#">
      Close
    </a>
  </div>
</div>
