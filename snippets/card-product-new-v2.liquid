{% liquid
  assign metafield = product.metafields.variants.color.value
  assign parent_index = forloop.index
  assign colorCount = 0
  for option in product.options_with_values
    if option.name == "Color" or option.name == 'color'
      assign colorCount = option.values.size
    endif
  endfor
%}
<product-card>
  <div class="card__product-card {% if product.media[1] != null %}is--hoverable{% endif %}">
    <div class="card__product-card-wrapper">
      <div class="card__product-media">
        {% if product.featured_image %}
          {{
            product.featured_image
            | image_url: width: product.featured_image.width
            | image_tag: class: 'primary_image', loading: 'lazy'
          }}
        {% endif %}

        {% if product.media[1] != null %}
          {{
            product.media[1]
            | image_url: width: product.media[1].width
            | image_tag: class: 'second_image', loading: 'lazy'
          }}
        {% endif %}
        <div class="sale-badge">Best seller</div>
        <button
          class="pc-quick-add-btn"
          data-product-handle="{{ product.handle }}"
          data-variant-id="{{ product.selected_or_first_available_variant.id }}"
        >
          <span>Quick View</span>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4V20M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      <div class="card__product-info">
        <h4>{{ product.title | escape }}</h4>
        <p class="card-colors-count">
          {% if colorCount == 0 %}1 Color{% else %}{{ colorCount }} Colors{% endif %}
        </p>
        <div class="card__product-price-rating">
          <div class="card__product-price">
            {% render 'price', product: product %}
          </div>
          <div class="card__product-rating">
            <div
              class="ruk_rating_snippet"
              data-sku="{{ product.handle }};{{ product.variants | map: 'sku' | join: ';' }};{{ product.variants | map: 'id' | join: ';' }}"
            ></div>
          </div>
        </div>
      </div>
    </div>
    <a href="{{ product.url }}"></a>
  </div>
</product-card>
