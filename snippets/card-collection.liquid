{% comment %}
  for render this collection card need to pass the following things -
      card_collection: block.settings.collection (a collection),
      name: block.settings.collection_name (card title name),
      content: block.settings.content (card title name),
      image: block.settings.collection_image (card featured image),
      block: block
{% endcomment %}

<style>
    .collection-card-wrapper-{{ block.id }}{
      position: relative;
      &:after {
        position: absolute;
        content: "";
        bottom: 0;
        left: 0;
        height: 100%;
        width: 100%;
        {% comment %} background: rgb(0 0 0 / 33%); {% endcomment %}
        z-index: 0;
        backdrop-filter: brightness({{ block.settings.image_overlay_opacity }}%);
      }
      .card-collection-link{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 2;
        cursor: pointer;
        display: block;
      }
      .collection-media-img{
        width: 100%;
        height: auto;
        aspect-ratio: 4/5;
        object-fit: cover;
        border-radius: 8px;
        border-radius: var(--rounded-2xl, 16px);
      }
      .card-content-wrapper{
        position: absolute;
        left: 0;
        bottom: 0;
        display: flex;
        z-index: 1;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: var(--Spacing-Container-md);
        box-sizing: border-box;
      }
      .step_btn {
        color: var(--Content-Inverted-main, #F3F4F6);

        /* UI Controls/Contextual/tagline/small */
        font-family: var(--font-family-Body, Archivo);
        font-size: 16px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 125% */
        letter-spacing: 0.96px;
        text-transform: uppercase;
        border: 1px solid rgba(83, 83, 83, 0.50);
        background: rgba(83, 83, 83, 0.30);
        padding: 8px 24px;
        width: max-content;
        border-radius: 99px;
        margin: 0 0 8px 0;
      }
      .card-title{
        color: var(--Content-Inverted-main, #F3F4F6);
        /* font-family: var(--font-family-Title, "Neue Plak"); */
        font-size: var(--Font-Size-Heading-H3, 24px);
        font-style: normal;
        font-weight: 700;
        line-height: var(--Line-Height-Heading-H3, 28px);
        letter-spacing: 0;
        margin: 0;
        {% if content != blank %}
          margin: 0 0 8px;
        {% endif %}
        @media(max-width: 768px){
          font-size: var(--Font-Size-Heading-H3, 18px);
          line-height: var(--Line-Height-Heading-H3, 22px);
        }
      }
      .card-content{
        color: var(--Content-Inverted-main, #F3F4F6);
        font-size: var(--Font-Size-Paragraph-Regular);
        letter-spacing: 0;
        line-height: 150%;
        @media(max-width: 768px){
          /* font-size: var(--Font-Size-Heading-H4, 18px);
          line-height: var(--Line-Height-Heading-H4, 22px); */
        }
      }
      .icon-wrapper{
        line-height: 0;
        display: flex;
        padding: var(--Spacing-Container-xxs, 8px);
        justify-content: center;
        align-items: center;
        gap: 8px;
        border-radius: var(--rounded-3xl, 24px);
        border: 1px solid rgba(255, 255, 255, 0.40);
        background: rgba(255, 255, 255, 0.20);
        transition: .5s ease;
        transform: rotate(45deg);
      }
    }

  .collection-card-wrapper-{{ block.id }}:hover {
    .icon-wrapper{
       transform: rotate(0);
        background: #000;
        border: 1px solid #000;
      }
  }
</style>
<div class="collection-card-wrapper-{{ block.id }} rr">
  {% if block.type == 'collection' %}
    <a href="{{ card_collection.url }}" class="card-collection-link"></a>
  {% else %}
    <a href="{{ url }}" class="card-collection-link"></a>
  {% endif %}
  <div class="media-wrapper">
    {% if image != null %}
      {% comment %} {{ image | image_url: width: image.width | image_tag: class: 'collection-media-img' }} {% endcomment %}
       <picture>
  <source media="(max-width: 600px)" srcset="{{ image | image_url: width: 400 }}">
  <source media="(max-width: 1300px)" srcset="{{ image | image_url: width: 500 }}">
  <source media="(max-width: 1600px)" srcset="{{ image | image_url: width: 700 }}">
  
  {{ image | image_url: width: image.width | image_tag: class: 'collection-media-img', loading: 'lazy' }}
</picture>
    {% elsif card_collection.featured_image != null %}
      {% comment %} {{
        card_collection.featured_image
        | image_url: width: card_collection.featured_image.width
        | image_tag: class: 'collection-media-img'
      }} {% endcomment %}

      <picture>
        <source media="(max-width: 600px)" srcset="{{ card_collection.featured_image | image_url: width: 400 }}">
        <source media="(max-width: 1300px)" srcset="{{ card_collection.featured_image | image_url: width: 500 }}">
        <source media="(max-width: 1600px)" srcset="{{ card_collection.featured_image | image_url: width: 700 }}">

        <img
          src="{{ card_collection.featured_image | image_url: width: card_collection.featured_image.width }}"
          class="collection-media-img"
          alt="{{ card_collection.title | default: 'Collection image' }}"
          loading="lazy"
        >
      </picture>
    {% else %}
      {{ 'image' | placeholder_svg_tag }}
    {% endif %}
  </div>
  <div class="card-content-wrapper">
    <div class="--content-box">
      {% unless step == blank %}
        <div class="step_btn">{{ step }}</div>
      {% endunless %}
      <h3 class="card-title">{{ name }}</h3>
      <div class="card-content">{{ content }}</div>
    </div>
    {% if show_arrow %}
      <div class="icon-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 25 24" fill="none">
          <path d="M7.66666 17L17.6667 7M17.6667 7H7.66666M17.6667 7V17" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    {% endif %}
  </div>
</div>
